---
title: 'Update Application'
description: 'Update an application by application ID. Supports updating application fields, customer information, and customer devices.'
openapi: 'PATCH /applications/{application_id}'
---

<Note>
This endpoint requires API key authentication via `x-api-key` header. The application must belong to your organization.

Use the `application_id` path parameter to identify which application to update. The API verifies the application belongs to your organization.

Set `dryRun=true` as a query parameter to validate the request without applying changes.
</Note>

## Path Parameters

- `application_id` (required): Application ID to update. The application must belong to your organization.

## Query Parameters

- `dryRun` (optional): true/false - if true, validates without making changes

## Request Body Structure

The request body matches the GET `/applications/{id}` response structure (without protected fields):

**Application fields at top level:**
- `status`, `rebate_type`, `approval_date`, `submission_date`, `total_requested_amount`, etc.

**Optional nested objects:**
- `customer`: Customer fields to update
- `customer_devices`: Array of devices to update (must include `id`)

**Protected fields** (cannot be updated): `id`, `customer_id`, `organization_id`, `program_id`, `created_at`, `updated_at`

## Example Request (Dry Run)

```bash
curl -X PATCH \
  "https://api.leap.energy/alpha/applications/123?dryRun=true" \
  -H "x-api-key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "approved",
    "approval_date": "2025-01-25",
    "customer": {
      "email": "newemail@example.com",
      "phone": "+15559876543"
    },
    "customer_devices": [
      {
        "id": 78,
        "inspection_passed": true,
        "permit_number": "PERMIT-2025-001"
      }
    ]
  }'
```

## Example Response - Dry Run

```json
{
  "ok": true,
  "requestId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "dryRun": true,
  "application_id": 123,
  "customer_id": 456,
  "validations": {
    "organization_verified": true,
    "devices_checked": 1,
    "strictStatusTransitions": true
  },
  "wouldMutate": {
    "application": {
      "status": "approved",
      "approval_date": "2025-01-25"
    },
    "customer": {
      "email": "newemail@example.com",
      "phone": "+15559876543"
    },
    "customer_devices": [
      {
        "id": 78,
        "inspection_passed": true,
        "permit_number": "PERMIT-2025-001"
      }
    ]
  }
}
```

## Example Request (Real Update)

```bash
curl -X PATCH \
  "https://api.leap.energy/alpha/applications/123" \
  -H "x-api-key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "approved",
    "approval_date": "2025-01-25",
    "customer": {
      "email": "newemail@example.com"
    }
  }'
```

## Example Response - Real Update

```json
{
  "ok": true,
  "requestId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "application_id": 123,
  "customer_id": 456,
  "mutations": {
    "application": {
      "updated": true,
      "fields": ["status", "approval_date"]
    },
    "customer": {
      "updated": true,
      "fields": ["email"]
    }
  },
  "data": {
    "id": 123,
    "program_id": 45,
    "customer_id": 456,
    "organization_id": "550e8400-e29b-41d4-a716-446655440000",
    "status": "approved",
    "approval_date": "2025-01-25",
    "submission_date": "2025-01-15",
    "created_at": "2025-01-10T10:00:00Z",
    "updated_at": "2025-01-25T16:45:00Z",
    "customer": {
      "id": 456,
      "first_name": "Jane",
      "last_name": "Doe",
      "email": "newemail@example.com",
      "customer_devices": [
        {
          "id": 78,
          "customer_id": 456,
          "device_id": 5,
          "quantity": 1
        }
      ]
    }
  }
}
```

## Status Transitions

By default, status transitions are restricted to forward progress only. The allowed order is:
`not_started` → `in_progress` → `awaiting_partner` → `completed` → `submitted` → `approved` / `rejected`

To override this restriction (e.g., move backward), include the `X-Force-Status: true` header:

```bash
curl -X PATCH \
  "https://api.leap.energy/alpha/applications/123" \
  -H "x-api-key: YOUR_API_KEY" \
  -H "X-Force-Status: true" \
  -H "Content-Type: application/json" \
  -d '{"status": "in_progress"}'
```

## Error Responses

**401 Unauthorized** - Missing or invalid API key:
```json
{
  "code": "missing_auth",
  "message": "x-api-key header required",
  "requestId": "..."
}
```

**403 Forbidden** - Application not in your organization:
```json
{
  "code": "forbidden",
  "message": "Application not in your organization",
  "requestId": "..."
}
```

**404 Not Found** - Application not found:
```json
{
  "code": "not_found",
  "message": "Application 123 not found",
  "requestId": "..."
}
```

**409 Conflict** - Invalid status transition:
```json
{
  "code": "invalid_status_transition",
  "message": "Cannot move approved → in_progress without X-Force-Status: true",
  "requestId": "..."
}
```

<Tip>
**Customer Devices:** 
- Each device in `customer_devices` must include `id` (required, not optional)
- Missing `id` will return a 400 Bad Request error
</Tip>
